(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{Vbbw:function(t,o,n){"use strict";n.r(o),n.d(o,"PembeliPageModule",function(){return F});var i=n("ofXK"),e=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),s=n("fXoL"),a=n("A7lL");function l(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-item",12),s.Wb("click",function(){s.gc(t);const n=o.$implicit;return s.Yb(2).loginAs(n)}),s.Kb(1,"ion-icon",13),s.Ob(2,"ion-label"),s.Ob(3,"h2"),s.lc(4),s.Nb(),s.Ob(5,"p"),s.lc(6),s.Nb(),s.Nb(),s.Nb()}if(2&t){const t=o.$implicit;s.zb(4),s.mc(t.customer_name),s.zb(2),s.mc(t.address)}}function b(t,o){if(1&t&&(s.Ob(0,"div",9),s.Ob(1,"ion-list"),s.Ob(2,"ion-list-header",10),s.lc(3," Pilih contoh akun dibawah atau lakukan registrasi "),s.Nb(),s.jc(4,l,7,2,"ion-item",11),s.Nb(),s.Nb()),2&t){const t=s.Yb();s.zb(4),s.bc("ngForOf",t.listUser)}}const d=function(){return["/pembeli/registrasi"]};let u=(()=>{class t{constructor(t,o){this.db=t,this.NavController=o,this.listUser=[]}ngOnInit(){this.db.getDatabaseState().subscribe(t=>{t&&this.db.getCustomer().subscribe(t=>{this.listUser=t,console.log(this.listUser)})})}loginAs(t){localStorage.setItem("userLogin",JSON.stringify(t)),this.NavController.navigateRoot(["/pembeli/panel"],{replaceUrl:!0})}goBack(){this.NavController.navigateBack([""],{replaceUrl:!0})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(a.a),s.Jb(r.I))},t.\u0275cmp=s.Db({type:t,selectors:[["app-login"]],decls:13,vars:3,consts:[["mode","ios"],[2,"height","57px","padding-top","5px"],["slot","start"],["color","light",3,"click"],["name","chevron-back-outline"],[2,"--background","#eaeaea","color","#333333"],["size","small",2,"padding-bottom","7px"],["expand","block","color","warning","fill","solid",3,"routerLink"],["style","margin-top: 20px;",4,"ngIf"],[2,"margin-top","20px"],[2,"margin-bottom","30px"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["color","medium","slot","start","name","person-circle"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar",1),s.Ob(2,"ion-buttons",2),s.Ob(3,"ion-button",3),s.Wb("click",function(){return o.goBack()}),s.Kb(4,"ion-icon",4),s.Nb(),s.Nb(),s.Ob(5,"ion-title"),s.lc(6,"Login"),s.Nb(),s.Nb(),s.Ob(7,"ion-toolbar",5),s.Ob(8,"ion-title",6),s.Ob(9,"ion-button",7),s.lc(10,"Registrasi"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(11,"ion-content",0),s.jc(12,b,5,1,"div",8),s.Nb()),2&t&&(s.zb(9),s.bc("routerLink",s.dc(2,d)),s.zb(3),s.bc("ngIf",o.listUser.length>0))},directives:[r.r,r.D,r.i,r.h,r.s,r.C,r.L,c.h,r.m,i.i,r.x,r.y,i.h,r.u,r.w],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#e91e63;color:#fff}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border:1px solid #eaeaea!important;margin-bottom:10px;border-radius:5px}.label-title[_ngcontent-%COMP%]{white-space:break-spaces!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#2f9495!important;min-height:70px}"]}),t})();var g=n("mrSG"),h=n("WOgW"),p=n("Bfh1"),m=n("92l+");let f=(()=>{class t{constructor(t,o,n,i,e,r,c){this.db=t,this.NavController=o,this.platform=n,this.toastController=i,this.androidPermissions=e,this.geolocation=r,this.locationAccuracy=c,this.platform.ready().then(()=>{this.checkGPSPermission()}).catch(t=>{console.log(t)})}ngOnInit(){}presentToast(t,o){return Object(g.a)(this,void 0,void 0,function*(){(yield this.toastController.create({message:o,color:t,position:"bottom",mode:"ios",duration:2e3})).present()})}simpanBarang(){""!=this.customer_name&&null!=this.customer_name&&""!=this.address&&null!=this.address&&""!=this.latitude&&null!=this.latitude&&""!=this.longitude&&null!=this.longitude?this.db.addCustomer(this.customer_name,this.address,this.latitude,this.longitude).then(t=>{this.presentToast("success","Berhasil di tambahkan"),this.goBack()}):this.presentToast("secondary","Semua form wajib diisi")}checkGPSPermission(){this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(t=>{let o=localStorage.getItem("locationCoords");""!=o&&null!=o?(this.latitude=JSON.parse(o).latitude,this.longitude=JSON.parse(o).longitude):t.hasPermission?this.askToTurnOnGPS():this.requestGPSPermission()},t=>{alert("checkGPSPermission "+t)})}requestGPSPermission(){this.locationAccuracy.canRequest().then(t=>{t?console.log("4"):this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(()=>{this.askToTurnOnGPS()},t=>{alert("requestPermission Error requesting location permissions "+t)})})}askToTurnOnGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{this.getLocationCoordinates()},t=>alert("Error requesting location permissions "+JSON.stringify(t)))}getLocationCoordinates(){this.geolocation.getCurrentPosition().then(t=>{this.latitude=""+t.coords.latitude,this.longitude=""+t.coords.longitude}).catch(t=>{alert("Error getting location"+t)})}goBack(){this.NavController.navigateBack(["/pembeli/login"],{replaceUrl:!0})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(a.a),s.Jb(r.I),s.Jb(r.K),s.Jb(r.N),s.Jb(h.a),s.Jb(p.a),s.Jb(m.a))},t.\u0275cmp=s.Db({type:t,selectors:[["app-registrasi"]],decls:26,vars:4,consts:[["mode","ios"],[2,"height","57px","padding-top","5px"],["slot","start"],["color","light",3,"click"],["name","chevron-back-outline"],["lines","none"],["placeholder","Nama Lengkap",3,"ngModel","ngModelChange"],["rows","3","placeholder","Alamat sekarang",3,"ngModel","ngModelChange"],["disabled","",3,"ngModel","ngModelChange"],["expand","block","color","warning",3,"click"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar",1),s.Ob(2,"ion-buttons",2),s.Ob(3,"ion-button",3),s.Wb("click",function(){return o.goBack()}),s.Kb(4,"ion-icon",4),s.Nb(),s.Nb(),s.Ob(5,"ion-title"),s.lc(6,"Registrasi"),s.Nb(),s.Nb(),s.Nb(),s.Ob(7,"ion-content",0),s.Ob(8,"ion-card"),s.Ob(9,"ion-card-content"),s.Ob(10,"ion-item",5),s.Ob(11,"ion-input",6),s.Wb("ngModelChange",function(t){return o.customer_name=t}),s.Nb(),s.Nb(),s.Ob(12,"ion-item",5),s.Ob(13,"ion-textarea",7),s.Wb("ngModelChange",function(t){return o.address=t}),s.Nb(),s.Nb(),s.Ob(14,"ion-item",5),s.Ob(15,"ion-label"),s.lc(16,"Lat : "),s.Nb(),s.Ob(17,"ion-input",8),s.Wb("ngModelChange",function(t){return o.latitude=t}),s.Nb(),s.Nb(),s.Ob(18,"ion-item",5),s.Ob(19,"ion-label"),s.lc(20,"Lng : "),s.Nb(),s.Ob(21,"ion-input",8),s.Wb("ngModelChange",function(t){return o.longitude=t}),s.Nb(),s.Nb(),s.Kb(22,"br"),s.Kb(23,"br"),s.Ob(24,"ion-button",9),s.Wb("click",function(){return o.simpanBarang()}),s.lc(25,"Simpan"),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.zb(11),s.bc("ngModel",o.customer_name),s.zb(2),s.bc("ngModel",o.address),s.zb(4),s.bc("ngModel",o.latitude),s.zb(4),s.bc("ngModel",o.longitude))},directives:[r.r,r.D,r.i,r.h,r.s,r.C,r.m,r.j,r.k,r.u,r.t,r.M,e.d,e.e,r.B,r.w],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#e91e63;color:#fff}ion-content[_ngcontent-%COMP%]{--background:#eaeaea}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border:1px solid #eaeaea!important;margin-bottom:10px;border-radius:5px}.label-title[_ngcontent-%COMP%]{white-space:break-spaces!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#2f9495!important;min-height:70px}"]}),t})();function O(t,o){1&t&&s.Kb(0,"img",18)}function N(t,o){if(1&t&&s.Kb(0,"img",19),2&t){const t=s.Yb();s.cc("src",t.photo,s.hc)}}let C=(()=>{class t{constructor(t,o){this.db=t,this.modalController=o,this.qty=1,this.subtotal=0}ngOnInit(){console.log(this.customer_id),this.subtotal=this.price}formatRupiah(t,o){var n=parseFloat(t).toString().split(","),i=n[0].length%3,e=n[0].substr(0,i),r=n[0].substr(i).match(/\d{3}/gi);return r&&(e+=(i?".":"")+r.join(".")),e=null!=n[1]?e+","+n[1]:e,null==o?e:e?"Rp. "+e:""}dismissModal(){this.modalController.dismiss()}removeQty(){let t=this.qty-1;this.qty=t>1?t:1,this.subtotal=this.price*this.qty}addQty(){let t=this.qty+1;t<=parseInt(this.jumlah)&&(this.qty=t,this.subtotal=this.price*this.qty)}addToCart(){let t=localStorage.getItem("order_"+this.customer_id),o=[];if(""!=t&&null!=t){let n=JSON.parse(t);if(n.length>0){let t=n;for(let n=0;n<t.length;n++){const i=t[n];i.pcode!=this.pcode&&o.push(i)}}}o.push({customer_id:this.customer_id,jumlah:this.jumlah,photo:this.photo,pcode:this.pcode,product_name:this.product_name,qty:this.qty,price:this.price,subtotal:this.subtotal}),localStorage.setItem("order_"+this.customer_id,JSON.stringify(o)),this.db.loadCart(),this.dismissModal()}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(a.a),s.Jb(r.H))},t.\u0275cmp=s.Db({type:t,selectors:[["app-modal-item"]],inputs:{value:"value"},decls:34,vars:8,consts:[["mode","ios"],["slot","start"],["slot","primary"],["color","danger",3,"click"],["slot","icon-only","name","close-circle"],["mode","ios",1,"ion-pading"],["size","4"],["src","./assets/miranda.jpg",4,"ngIf"],[3,"src",4,"ngIf"],["size","8"],[2,"margin-top","5px"],["lines","none",2,"float","right"],["color","medium","fill","clear",3,"click"],["slot","icon-only","name","remove-circle"],[2,"width","40px","text-align","center"],["color","success","fill","clear",3,"click"],["slot","icon-only","name","add-circle"],["expand","block","color","warning",3,"click"],["src","./assets/miranda.jpg"],[3,"src"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-buttons",1),s.Kb(3,"ion-back-button"),s.Nb(),s.Ob(4,"ion-title"),s.lc(5,"Detail Produk"),s.Nb(),s.Ob(6,"ion-buttons",2),s.Ob(7,"ion-button",3),s.Wb("click",function(){return o.dismissModal()}),s.Kb(8,"ion-icon",4),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(9,"ion-content",5),s.Ob(10,"ion-grid"),s.Ob(11,"ion-row"),s.Ob(12,"ion-col",6),s.jc(13,O,1,0,"img",7),s.jc(14,N,1,1,"img",8),s.Nb(),s.Ob(15,"ion-col",9),s.Ob(16,"h3",10),s.lc(17),s.Nb(),s.Ob(18,"p"),s.lc(19),s.Nb(),s.Ob(20,"p"),s.lc(21),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(22,"ion-footer",0),s.Ob(23,"ion-toolbar"),s.Ob(24,"ion-item",11),s.Ob(25,"ion-button",12),s.Wb("click",function(){return o.removeQty()}),s.Kb(26,"ion-icon",13),s.Nb(),s.Ob(27,"p",14),s.lc(28),s.Nb(),s.Ob(29,"ion-button",15),s.Wb("click",function(){return o.addQty()}),s.Kb(30,"ion-icon",16),s.Nb(),s.Nb(),s.Nb(),s.Ob(31,"ion-toolbar"),s.Ob(32,"ion-button",17),s.Wb("click",function(){return o.addToCart()}),s.lc(33),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.zb(13),s.bc("ngIf",""==o.photo),s.zb(1),s.bc("ngIf",""!=o.photo),s.zb(3),s.mc(o.product_name),s.zb(2),s.mc(o.formatRupiah(o.price,"Rp. ")),s.zb(2),s.oc("Kode : ",o.pcode," | Stok : ",o.jumlah,""),s.zb(7),s.mc(o.qty),s.zb(5),s.nc("Add to cart (",o.formatRupiah(o.subtotal,"Rp. ")," )"))},directives:[r.r,r.D,r.i,r.e,r.f,r.C,r.h,r.s,r.m,r.q,r.A,r.l,i.i,r.p,r.u],styles:[""]}),t})();function k(t,o){1&t&&s.Kb(0,"img",18)}function P(t,o){if(1&t&&s.Kb(0,"img",19),2&t){const t=s.Yb().$implicit;s.cc("src",t.photo,s.hc)}}function y(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-item",14),s.Wb("click",function(){s.gc(t);const n=o.$implicit;return s.Yb(2).openModal(n)}),s.Ob(1,"ion-avatar",15),s.jc(2,k,1,0,"img",16),s.jc(3,P,1,1,"img",17),s.Nb(),s.Ob(4,"ion-label"),s.Ob(5,"h2"),s.lc(6),s.Nb(),s.Ob(7,"h3"),s.lc(8),s.Nb(),s.Ob(9,"p"),s.lc(10),s.Nb(),s.Nb(),s.Nb()}if(2&t){const t=o.$implicit,n=s.Yb(2);s.zb(2),s.bc("ngIf",""==t.photo),s.zb(1),s.bc("ngIf",""!=t.photo),s.zb(3),s.mc(t.product_name),s.zb(2),s.mc(n.formatRupiah(t.price,"Rp. ")),s.zb(2),s.oc("Kode : ",t.pcode," | Stok : ",t.jumlah,"")}}function v(t,o){if(1&t&&(s.Ob(0,"ion-list",12),s.Ob(1,"ion-list-header"),s.lc(2," Daftar barang "),s.Nb(),s.jc(3,y,11,6,"ion-item",13),s.Nb()),2&t){const t=s.Yb();s.zb(3),s.bc("ngForOf",t.listProduct)}}const _=function(){return["/pembeli/myorder"]},x=function(){return["/pembeli/cart"]};let M=(()=>{class t{constructor(t,o,n,i,e){this.platform=t,this.db=o,this.NavController=n,this.alertController=i,this.modalController=e,this.listProduct=[],this.customer_name="",this.address="",this.cartCount=0,this.platform.ready().then(()=>{let t=localStorage.getItem("userLogin");""!=t&&null!=t?(this.currentUser=JSON.parse(t),this.customer_name=this.currentUser.customer_name,this.address=this.currentUser.address):(localStorage.removeItem("userLogin"),this.NavController.navigateRoot([""],{replaceUrl:!0}))}).catch(t=>{console.log(t)})}ngOnInit(){}presentAlert(t){return Object(g.a)(this,void 0,void 0,function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:t,mode:"ios",message:"Maaf, stok barang telah habis",buttons:["Tutup"]});yield o.present()})}ionViewDidEnter(){this.db.getDatabaseState().subscribe(t=>{t&&(this.db.getProducts().subscribe(t=>{this.listProduct=t,console.log(this.listProduct)}),this.db.loadCart(),this.db.getCart().subscribe(t=>{if(this.cartCount=0,t.length>0)for(let o=0;o<t.length;o++)this.cartCount=this.cartCount+parseInt(t[o].qty)}))})}presentAlertProfil(){return Object(g.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Hai, "+this.customer_name,subHeader:"Logout akan membersihkan data keranjang!",mode:"ios",buttons:[{text:"Tutup",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Logout",handler:()=>{let t=localStorage.getItem("userLogin");if(""!=t&&null!=t){let o=JSON.parse(t);localStorage.removeItem("order_"+o.customer_id),localStorage.removeItem("userLogin"),this.NavController.navigateRoot([""],{replaceUrl:!0})}}}]});yield t.present()})}formatRupiah(t,o){var n=parseFloat(t).toString().split(","),i=n[0].length%3,e=n[0].substr(0,i),r=n[0].substr(i).match(/\d{3}/gi);return r&&(e+=(i?".":"")+r.join(".")),e=null!=n[1]?e+","+n[1]:e,null==o?e:e?"Rp. "+e:""}openModal(t){return Object(g.a)(this,void 0,void 0,function*(){if(parseInt(t.jumlah)>0){t.customer_id=this.currentUser.customer_id;const o=yield this.modalController.create({component:C,cssClass:"my-custom-modal-css",componentProps:t});return yield o.present()}this.presentAlert(t.product_name)})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(r.K),s.Jb(a.a),s.Jb(r.I),s.Jb(r.b),s.Jb(r.H))},t.\u0275cmp=s.Db({type:t,selectors:[["app-panel"]],decls:27,vars:7,consts:[["mode","ios"],[2,"height","57px","padding-top","5px"],["slot","start",2,"margin-left","15px",3,"click"],["slot","icon-only","color","light","name","person-circle"],["slot","primary"],["fill","solid","color","warning",3,"routerLink"],["color","danger","slot","end","fill","outline",3,"click"],["style","margin-top: 30px;",4,"ngIf"],["vertical","bottom","horizontal","start","slot","fixed"],["color","warning",3,"routerLink"],["name","cart"],[1,"custom-badge"],[2,"margin-top","30px"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["src","./assets/miranda.jpg",4,"ngIf"],[3,"src",4,"ngIf"],["src","./assets/miranda.jpg"],[3,"src"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar",1),s.Ob(2,"ion-buttons",2),s.Wb("click",function(){return o.presentAlertProfil()}),s.Ob(3,"ion-button"),s.Kb(4,"ion-icon",3),s.Nb(),s.lc(5),s.Nb(),s.Ob(6,"ion-buttons",4),s.Ob(7,"ion-button",5),s.lc(8," Transaksi Saya "),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(9,"ion-content",0),s.Ob(10,"ion-card"),s.Ob(11,"ion-item"),s.Ob(12,"ion-label"),s.lc(13,"Informasi"),s.Nb(),s.Nb(),s.Ob(14,"ion-card-content"),s.lc(15," Untuk keluar dari halaman ini, silahkan gunakan "),s.Ob(16,"strong"),s.lc(17,"Logout"),s.Nb(),s.Nb(),s.Ob(18,"ion-item"),s.Ob(19,"ion-button",6),s.Wb("click",function(){return o.presentAlertProfil()}),s.lc(20,"Logout Sekarang"),s.Nb(),s.Nb(),s.Nb(),s.jc(21,v,4,1,"ion-list",7),s.Ob(22,"ion-fab",8),s.Ob(23,"ion-fab-button",9),s.Kb(24,"ion-icon",10),s.Ob(25,"div",11),s.lc(26),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.zb(5),s.nc(" ",o.customer_name," "),s.zb(2),s.bc("routerLink",s.dc(5,_)),s.zb(14),s.bc("ngIf",o.listProduct.length>0),s.zb(2),s.bc("routerLink",s.dc(6,x)),s.zb(3),s.mc(o.cartCount))},directives:[r.r,r.D,r.i,r.h,r.s,r.L,c.h,r.m,r.j,r.u,r.w,r.k,i.i,r.n,r.o,r.x,r.y,i.h,r.d],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#e91e63;color:#fff}.custom-badge[_ngcontent-%COMP%]{position:absolute;top:9px;right:7px;background:#ff5722;color:#fff;width:19px;height:19px;border-radius:13px;font-size:13px;text-align:center;padding-top:3px}.label-title[_ngcontent-%COMP%]{white-space:break-spaces!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#2f9495!important;min-height:70px}"]}),t})();n("UDhR");var w=n("wd/R");function I(t,o){if(1&t){const t=s.Pb();s.Ob(0,"div",8),s.Kb(1,"img",9),s.Ob(2,"p",10),s.lc(3,"-- Tidak ada item di keranjang --"),s.Nb(),s.Ob(4,"ion-button",11),s.Wb("click",function(){return s.gc(t),s.Yb().goBack()}),s.lc(5,"Mulai berbelanja"),s.Nb(),s.Nb()}}function z(t,o){1&t&&s.Kb(0,"img",26)}function S(t,o){if(1&t&&s.Kb(0,"img",27),2&t){const t=s.Yb().$implicit;s.cc("src",t.photo,s.hc)}}function j(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-button",31),s.Wb("click",function(){return s.gc(t),s.Yb(4).actionButtonVoucer()}),s.lc(1,"Gunakan Voucher"),s.Nb()}}function R(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-button",32),s.Wb("click",function(){return s.gc(t),s.Yb(4).actionButtonVoucer()}),s.lc(1,"Hapus Voucher"),s.Nb()}}function T(t,o){if(1&t&&(s.Ob(0,"ion-item",28),s.Ob(1,"ion-label",15),s.lc(2,"Setiap pembelian MIRANDA H.C N.BLACK 30.MC1, mendapat potongan Rp. 1.000"),s.Nb(),s.jc(3,j,2,0,"ion-button",29),s.jc(4,R,2,0,"ion-button",30),s.Nb()),2&t){const t=s.Yb(3);s.zb(3),s.bc("ngIf",0==t.useVoucher),s.zb(1),s.bc("ngIf",1==t.useVoucher)}}function B(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-card"),s.Ob(1,"ion-item"),s.Ob(2,"ion-avatar",2),s.jc(3,z,1,0,"img",13),s.jc(4,S,1,1,"img",14),s.Nb(),s.Ob(5,"ion-label",15),s.lc(6),s.Nb(),s.Ob(7,"ion-button",16),s.Wb("click",function(){s.gc(t);const n=o.$implicit;return s.Yb(2).removeFromCart(n)}),s.Kb(8,"ion-icon",17),s.Nb(),s.Nb(),s.Ob(9,"ion-card-content"),s.lc(10),s.Kb(11,"br"),s.lc(12),s.Nb(),s.Ob(13,"ion-item",18),s.Ob(14,"ion-button",19),s.Wb("click",function(){s.gc(t);const n=o.$implicit;return s.Yb(2).removeQty(n)}),s.Kb(15,"ion-icon",20),s.Nb(),s.Ob(16,"p",21),s.lc(17),s.Nb(),s.Ob(18,"ion-button",22),s.Wb("click",function(){s.gc(t);const n=o.$implicit;return s.Yb(2).addQty(n)}),s.Kb(19,"ion-icon",23),s.Nb(),s.Ob(20,"ion-badge",24),s.lc(21),s.Nb(),s.Nb(),s.jc(22,T,5,2,"ion-item",25),s.Nb()}if(2&t){const t=o.$implicit,n=s.Yb(2);s.zb(3),s.bc("ngIf",""==t.photo),s.zb(1),s.bc("ngIf",""!=t.photo),s.zb(2),s.mc(t.product_name),s.zb(4),s.nc(" ",n.formatRupiah(t.price,"Rp. ")," "),s.zb(2),s.oc(" Kode : ",t.pcode," | Stok : ",t.jumlah," "),s.zb(5),s.mc(t.qty),s.zb(4),s.mc(n.formatRupiah(t.subtotal,"Rp. ")),s.zb(1),s.bc("ngIf","010001"==t.pcode)}}function J(t,o){if(1&t&&(s.Ob(0,"div"),s.jc(1,B,23,9,"ion-card",12),s.Nb()),2&t){const t=s.Yb();s.zb(1),s.bc("ngForOf",t.listCart)}}function L(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-footer",33),s.Ob(1,"ion-toolbar",34),s.Ob(2,"div",35),s.Ob(3,"ion-grid"),s.Ob(4,"ion-row"),s.Ob(5,"ion-col",36),s.lc(6,"Total : "),s.Nb(),s.Ob(7,"ion-col",37),s.lc(8),s.Nb(),s.Nb(),s.Ob(9,"ion-row"),s.Ob(10,"ion-col",36),s.lc(11,"Potongan : "),s.Nb(),s.Ob(12,"ion-col",37),s.lc(13),s.Nb(),s.Nb(),s.Ob(14,"ion-row"),s.Ob(15,"ion-col",36),s.lc(16,"PPn : "),s.Nb(),s.Ob(17,"ion-col",37),s.lc(18),s.Nb(),s.Nb(),s.Ob(19,"ion-row"),s.Ob(20,"ion-col",36),s.lc(21,"Total Bayar : "),s.Nb(),s.Ob(22,"ion-col",37),s.Ob(23,"strong",38),s.lc(24),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(25,"ion-button",39),s.Wb("click",function(){return s.gc(t),s.Yb().actionCheckOut()}),s.lc(26," Checkout "),s.Nb(),s.Nb(),s.Nb()}if(2&t){const t=s.Yb();s.zb(8),s.nc("Rp. ",t.formatRupiah(t.viewTotal,"Rp. "),""),s.zb(5),s.nc("(-) ",t.formatRupiah(t.viewVoucer,"Rp. "),""),s.zb(5),s.mc(t.formatRupiah(t.viewPPN,"Rp. ")),s.zb(6),s.mc(t.formatRupiah(t.viewTotalBayar,"Rp. "))}}function K(t,o){if(1&t){const t=s.Pb();s.Ob(0,"div",7),s.Kb(1,"img",8),s.Ob(2,"p",9),s.lc(3,"-- Tidak ada orderan --"),s.Nb(),s.Ob(4,"ion-button",10),s.Wb("click",function(){return s.gc(t),s.Yb().goBack()}),s.lc(5,"Mulai berbelanja"),s.Nb(),s.Nb()}}function Y(t,o){1&t&&s.Kb(0,"img",19)}function q(t,o){if(1&t&&s.Kb(0,"img",20),2&t){const t=s.Yb().$implicit;s.cc("src",t.photo,s.hc)}}function A(t,o){if(1&t&&(s.Ob(0,"ion-card"),s.Ob(1,"ion-item"),s.Ob(2,"ion-avatar",2),s.jc(3,Y,1,0,"img",12),s.jc(4,q,1,1,"img",13),s.Nb(),s.Ob(5,"ion-label",14),s.lc(6),s.Nb(),s.Nb(),s.Ob(7,"ion-card-content"),s.Ob(8,"ion-grid",15),s.Ob(9,"ion-row"),s.Ob(10,"ion-col",16),s.lc(11),s.Nb(),s.Nb(),s.Ob(12,"ion-row"),s.Ob(13,"ion-col",17),s.lc(14," Order : "),s.Nb(),s.Ob(15,"ion-col",18),s.lc(16),s.Nb(),s.Nb(),s.Ob(17,"ion-row"),s.Ob(18,"ion-col",17),s.lc(19," Total : "),s.Nb(),s.Ob(20,"ion-col",18),s.lc(21),s.Nb(),s.Nb(),s.Ob(22,"ion-row"),s.Ob(23,"ion-col",17),s.lc(24," Potongan : "),s.Nb(),s.Ob(25,"ion-col",18),s.lc(26),s.Nb(),s.Nb(),s.Ob(27,"ion-row"),s.Ob(28,"ion-col",17),s.lc(29," PPn : "),s.Nb(),s.Ob(30,"ion-col",18),s.lc(31),s.Nb(),s.Nb(),s.Ob(32,"ion-row"),s.Ob(33,"ion-col",17),s.lc(34," Total Bayar : "),s.Nb(),s.Ob(35,"ion-col",18),s.Ob(36,"strong"),s.lc(37),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()),2&t){const t=o.$implicit,n=s.Yb(2);s.zb(3),s.bc("ngIf",""==t.photo),s.zb(1),s.bc("ngIf",""!=t.photo),s.zb(2),s.mc(t.product_name),s.zb(5),s.nc(" ",t.order_id," "),s.zb(5),s.oc(" ",t.qty," x ",n.formatRupiah(t.price,"Rp. ")," "),s.zb(5),s.nc(" ",n.formatRupiah(t.subtotal,"Rp. ")," "),s.zb(5),s.nc(" ( - ) ",n.formatRupiah(t.amount_discount,"Rp. ")," "),s.zb(5),s.nc(" ",n.formatRupiah(.1*(t.subtotal-t.amount_discount),"Rp. ")," "),s.zb(6),s.nc(" ",n.formatRupiah(.1*(t.subtotal-t.amount_discount)+(t.subtotal-t.amount_discount),"Rp. ")," ")}}function W(t,o){if(1&t&&(s.Ob(0,"div"),s.jc(1,A,38,10,"ion-card",11),s.Nb()),2&t){const t=s.Yb();s.zb(1),s.bc("ngForOf",t.listOrder)}}const D=[{path:"",component:u},{path:"login",component:u},{path:"registrasi",component:f},{path:"panel",component:M},{path:"cart",component:(()=>{class t{constructor(t,o,n,i){this.db=t,this.NavController=o,this.alertController=n,this.loadingController=i,this.listCart=[],this.viewTotal=0,this.viewVoucer=0,this.viewTotalBayar=0,this.viewPPN=0,this.useVoucher=0}ngOnInit(){let t=localStorage.getItem("userLogin");if(""!=t&&null!=t){let o=JSON.parse(t);this.customer_id=o.customer_id}}presentLoading(t){return Object(g.a)(this,void 0,void 0,function*(){const o=yield this.loadingController.create({cssClass:"my-custom-class",message:t,mode:"ios",duration:1500});yield o.present(),yield o.onDidDismiss(),console.log("Loading dismissed!")})}ionViewDidEnter(){this.db.loadCart(),this.db.getCart().subscribe(t=>{this.listCart=t,this.hitungTotalBayar()})}formatRupiah(t,o){var n=parseFloat(t).toString().split(","),i=n[0].length%3,e=n[0].substr(0,i),r=n[0].substr(i).match(/\d{3}/gi);return r&&(e+=(i?".":"")+r.join(".")),e=null!=n[1]?e+","+n[1]:e,null==o?e:e?"Rp. "+e:""}alertSucessOrder(){return Object(g.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",mode:"ios",header:"Sukses Order",message:"Terima kasih telah order",backdropDismiss:!1,buttons:[{text:"Lihat orderan saya",handler:()=>{this.NavController.navigateForward(["/pembeli/myorder"],{})}}]});yield t.present()})}removeFromCart(t){return Object(g.a)(this,void 0,void 0,function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",mode:"ios",header:t.product_name,message:"Hapus dari keranjang ?",buttons:[{text:"Tidak",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Ya",handler:()=>{let o=localStorage.getItem("order_"+t.customer_id),n=[];if(""!=o&&null!=o){let i=JSON.parse(o);if(i.length>0){let o=i;for(let i=0;i<o.length;i++){const e=o[i];e.pcode!=t.pcode&&n.push(e)}}}localStorage.setItem("order_"+t.customer_id,JSON.stringify(n)),this.db.loadCart()}}]});yield o.present()})}removeQty(t){let o=parseInt(t.qty)-1;if(o>=1){this.presentLoading("Update keranjang...");let n=[];for(let i=0;i<this.listCart.length;i++)this.listCart[i].pcode==t.pcode&&(this.listCart[i].qty=o,this.listCart[i].subtotal=parseFloat(t.price)*o),n.push(this.listCart[i]);localStorage.setItem("order_"+t.customer_id,JSON.stringify(n)),this.db.loadCart(),this.hitungTotalBayar()}}addQty(t){let o=parseInt(t.qty)+1;if(o<=parseInt(t.jumlah)){this.presentLoading("Update keranjang...");let n=[];for(let i=0;i<this.listCart.length;i++)this.listCart[i].pcode==t.pcode&&(this.listCart[i].qty=o,this.listCart[i].subtotal=parseFloat(t.price)*o),n.push(this.listCart[i]);localStorage.setItem("order_"+t.customer_id,JSON.stringify(n)),this.db.loadCart(),this.hitungTotalBayar()}}hitungTotalBayar(){if(this.viewTotal=0,this.viewVoucer=1==this.useVoucher?1e3:0,this.viewTotalBayar=0,this.listCart.length>0){for(let o=0;o<this.listCart.length;o++)this.viewTotal=this.viewTotal+parseFloat(this.listCart[o].subtotal);let t=this.viewTotal-this.viewVoucer;this.viewPPN=.1*t,this.viewTotalBayar=this.viewPPN+t}}actionButtonVoucer(){0==this.useVoucher?(this.useVoucher=1,this.viewVoucer=1e3):(this.useVoucher=0,this.viewVoucer=0),this.hitungTotalBayar()}actionCheckOut(){this.presentLoading("Memproses order..."),setTimeout(()=>{localStorage.removeItem("order_"+this.customer_id),this.db.loadCart(),this.alertSucessOrder()},2e3);let t="INV/"+w().format("MM/YYYY"),o=w().format("YYYY-MM-DD"),n=0!=this.viewVoucer?"pmo-001":"",i=0!=this.viewVoucer?1e3:0,e=this.viewTotal,r=this.viewPPN,c=this.viewTotalBayar,s=w().unix();this.db.addMyOrder(t+"/"+s,o,this.customer_id,n,i,e,r,c,s)}goBack(){this.NavController.navigateBack(["/pembeli/panel"],{replaceUrl:!0})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(a.a),s.Jb(r.I),s.Jb(r.b),s.Jb(r.G))},t.\u0275cmp=s.Db({type:t,selectors:[["app-cart"]],decls:11,vars:3,consts:[["mode","ios"],[2,"height","57px","padding-top","5px"],["slot","start"],["color","light",3,"click"],["name","chevron-back-outline"],["style","text-align: center;margin-top: 30%;",4,"ngIf"],[4,"ngIf"],["class","ion-no-border","mode","ios",4,"ngIf"],[2,"text-align","center","margin-top","30%"],["src","./assets/shopping.png",2,"max-width","77px"],[2,"color","#d88b8b","font-size","21px","font-weight","600"],["color","warning",3,"click"],[4,"ngFor","ngForOf"],["src","./assets/miranda.jpg",4,"ngIf"],[3,"src",4,"ngIf"],[1,"label-title"],["fill","clear","color","danger","slot","end",3,"click"],["slot","icon-only","name","trash"],["lines","none"],["color","medium","fill","clear",3,"click"],["slot","icon-only","name","remove-circle"],[2,"width","40px","text-align","center"],["color","success","fill","clear",3,"click"],["slot","icon-only","name","add-circle"],["slot","end","color","warning"],["style","--background:#ffe1e1;font-size: 13px;",4,"ngIf"],["src","./assets/miranda.jpg"],[3,"src"],[2,"--background","#ffe1e1","font-size","13px"],["fill","solid","slot","end",3,"click",4,"ngIf"],["fill","solid","slot","end","color","danger",3,"click",4,"ngIf"],["fill","solid","slot","end",3,"click"],["fill","solid","slot","end","color","danger",3,"click"],["mode","ios",1,"ion-no-border"],[2,"padding-bottom","15px"],["id","listBayar",2,"text-align","right","padding","0px 15px","font-size","15px"],["size","7"],["size","5"],[2,"color","#e91e63"],["expand","block","color","warning","fill","solid",3,"click"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar",1),s.Ob(2,"ion-buttons",2),s.Ob(3,"ion-button",3),s.Wb("click",function(){return o.goBack()}),s.Kb(4,"ion-icon",4),s.Nb(),s.Nb(),s.Ob(5,"ion-title"),s.lc(6,"Cart"),s.Nb(),s.Nb(),s.Nb(),s.Ob(7,"ion-content",0),s.jc(8,I,6,0,"div",5),s.jc(9,J,2,1,"div",6),s.Nb(),s.jc(10,L,27,4,"ion-footer",7)),2&t&&(s.zb(8),s.bc("ngIf",0==o.listCart.length),s.zb(1),s.bc("ngIf",o.listCart.length>0),s.zb(1),s.bc("ngIf",o.listCart.length>0))},directives:[r.r,r.D,r.i,r.h,r.s,r.C,r.m,i.i,i.h,r.j,r.u,r.d,r.w,r.k,r.g,r.p,r.q,r.A,r.l],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#e91e63;color:#fff}ion-content[_ngcontent-%COMP%]{--background:#eaeaea!important}ion-content[_ngcontent-%COMP%]   #listBayar[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   #listBayar[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   #listBayar[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:0!important;padding:0!important}.custom-badge[_ngcontent-%COMP%]{position:absolute;top:9px;right:7px;background:#ff5722;color:#fff;width:19px;height:19px;border-radius:13px;font-size:13px;text-align:center;padding-top:3px}.label-title[_ngcontent-%COMP%]{white-space:break-spaces!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{min-height:70px}"]}),t})()},{path:"myorder",component:(()=>{class t{constructor(t,o,n,i){this.db=t,this.NavController=o,this.alertController=n,this.loadingController=i,this.listOrder=[]}ngOnInit(){}ionViewDidEnter(){this.db.getMyOrder().subscribe(t=>{this.listOrder=t})}formatRupiah(t,o){var n=parseFloat(t).toString().split(","),i=n[0].length%3,e=n[0].substr(0,i),r=n[0].substr(i).match(/\d{3}/gi);return r&&(e+=(i?".":"")+r.join(".")),e=null!=n[1]?e+","+n[1]:e,null==o?e:e?"Rp. "+e:""}goBack(){this.NavController.navigateBack(["/pembeli/panel"],{replaceUrl:!0})}}return t.\u0275fac=function(o){return new(o||t)(s.Jb(a.a),s.Jb(r.I),s.Jb(r.b),s.Jb(r.G))},t.\u0275cmp=s.Db({type:t,selectors:[["app-myorder"]],decls:10,vars:2,consts:[["mode","ios"],[2,"height","57px","padding-top","5px"],["slot","start"],["color","light",3,"click"],["name","chevron-back-outline"],["style","text-align: center;margin-top: 30%;",4,"ngIf"],[4,"ngIf"],[2,"text-align","center","margin-top","30%"],["src","./assets/shopping.png",2,"max-width","77px"],[2,"color","#d88b8b","font-size","21px","font-weight","600"],["color","warning",3,"click"],[4,"ngFor","ngForOf"],["src","./assets/miranda.jpg",4,"ngIf"],[3,"src",4,"ngIf"],[1,"label-title"],[2,"text-align","right"],["size","12",2,"color","#e91e63"],["size","5"],["size","7"],["src","./assets/miranda.jpg"],[3,"src"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header",0),s.Ob(1,"ion-toolbar",1),s.Ob(2,"ion-buttons",2),s.Ob(3,"ion-button",3),s.Wb("click",function(){return o.goBack()}),s.Kb(4,"ion-icon",4),s.Nb(),s.Nb(),s.Ob(5,"ion-title"),s.lc(6,"Transaksi Saya"),s.Nb(),s.Nb(),s.Nb(),s.Ob(7,"ion-content",0),s.jc(8,K,6,0,"div",5),s.jc(9,W,2,1,"div",6),s.Nb()),2&t&&(s.zb(8),s.bc("ngIf",0==o.listOrder.length),s.zb(1),s.bc("ngIf",o.listOrder.length>0))},directives:[r.r,r.D,r.i,r.h,r.s,r.C,r.m,i.i,i.h,r.j,r.u,r.d,r.w,r.k,r.q,r.A,r.l],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#e91e63;color:#fff}ion-content[_ngcontent-%COMP%]{--background:#eaeaea!important}ion-content[_ngcontent-%COMP%]   #listBayar[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   #listBayar[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   #listBayar[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:0!important;padding:0!important}.custom-badge[_ngcontent-%COMP%]{position:absolute;top:9px;right:7px;background:#ff5722;color:#fff;width:19px;height:19px;border-radius:13px;font-size:13px;text-align:center;padding-top:3px}.label-title[_ngcontent-%COMP%]{white-space:break-spaces!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{min-height:70px}"]}),t})()}];let V=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({imports:[[c.i.forChild(D)],c.i]}),t})(),F=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({imports:[[i.b,e.a,r.E,V]]}),t})()}}]);